package fr.intervia.service;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Component;

import fr.intervia.domaine.CompteExploitation;
import fr.intervia.domaine.CompteExploitation.LibCompte;
import fr.intervia.domaine.CompteMensuel;
import fr.intervia.domaine.MoisCampagne;

@Component
public class CompteExploitationService {

	public double calculerSousTotal(List<CompteExploitation> listeCe) {
		double total = 0;
		for (CompteExploitation ce  : listeCe) {
			total += ce.getVal();
		}
		return total;
	}

	public Map<String, Double> calculerCum(List<CompteMensuel> lCm, MoisCampagne mois) {

		double salaireEtChargeCum = 0;
		double fraisCum =  0;
		Map<String, Double> m =  new HashMap<>();

		for (CompteMensuel cm : lCm) {

			if (cm.getMois().inf(mois)) {

				for (CompteExploitation ce : cm.getComptes()) {

					switch (ce.getLibCompte()) {
					case salairesBrut:
						salaireEtChargeCum += ce.getVal();
						break;
					case chargesPatronales:
						salaireEtChargeCum += ce.getVal();
						break;
					case fraisDeplacementMois:
						fraisCum += ce.getVal();
						break;
					}

				}

			}
		}
		
		m.put("salaireEtChargeCum", salaireEtChargeCum);
		m.put("fraisCum", fraisCum);
		
		return m;
		
	}

}
